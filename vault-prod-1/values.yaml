---
vault:
  server:
    image:
      tag: "1.15.2"
    
    ha:
      enabled: true
      replicas: 1
      raft:
        enabled: true
        setNodeId: true
        config: |
          ui = true
          listener "tcp" {
            tls_disable = 1
            address = "[::]:8200"
            cluster_address = "[::]:8201"
          }
          storage "raft" {
            path = "/vault/data"
          }

    extraInitContainers: []

    securityContext:
      runAsUser: 100
      runAsGroup: 100
      fsGroup: 100

    dataStorage:
      enabled: true
      size: 256Mi
      storageClass: "nas-storage"
      mountPath: "/vault/data"

    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: kubernetes.io/hostname
                  operator: In
                  values:
                    - k8s-master
                    - k8s-node1
                    - k8s-node2
